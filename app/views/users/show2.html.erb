<% provide(:title, "Profile") %>

<div class="container-fluid">
	<div class="row">
		<div class="col-md-4">
			<%= @user.first_name + " " + @user.last_name %>
		</div>
	</div>
	
	<br>
	
	<div class="row">
		<div class="col-md-4">
			<%= @user.email %>
		</div>
	</div>
	
	<br>
	
	<div class="row">
		<div class="col-md-12">
			<div class="pull-left">
			<%= image_tag @user.picture.url if @user.picture? %>
			</div>
		</div>
	</div>
		
	<br>

	<div class="form-group">
		<label>Bio</label><br />
		<div class="row">
			<div class="col-md-6">
				<%= best_in_place @user, :bio, url: registration_path(@user), as: :textarea, place_holder: "click me to edit", html_attrs: {cols: 30, rows: 10}, :display_with => lambda{ |v| simple_format(v) } %>
			</div>
		</div>
	</div>
			
	
		
			<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:method => :put, :multipart => true}) do |f| %>
				<%= devise_error_messages! %><!--Check to make sure this works-->
					
				  <div class="form-group">
						<label><%= f.label :picture %></label><br />
						<%= f.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
						<%= f.hidden_field :picture_cache %>
					</div>
					
					<div class="form-group">
				    <%= f.submit "Update", class: "btn btn-primary" %>
					</div>
					
			<% end %>
	
			<script type="text/javascript">
			  $('#picture').bind('change', function() {
			    var size_in_megabytes = this.files[0].size/1024/1024;
			    if (size_in_megabytes > 5) {
			      alert('Maximum file size is 5MB. Please choose a smaller file.');
			    }
			  });
			</script>
	
</div>


				<!-- Fix this hack -->
				<!--
				<% if @user.bio.blank? %>
					<% @user.update_attributes!(bio: "click me to edit") %>
				<% end %>
				
				<%= best_in_place @user, :bio, url: registration_path(@user), as: :textarea, place_holder: "click me to edit", sanitize: true, html_attrs: { class: 'redactor', cols: 80, rows: 10}, :display_with => lambda{ |v| simple_format(v).html_safe } %> -->